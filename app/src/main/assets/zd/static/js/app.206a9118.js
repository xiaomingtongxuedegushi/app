(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},1:function(t,e){},"139c":function(t,e,n){},2:function(t,e){},3:function(t,e){},4:function(t,e){},"452c":function(t,e,n){"use strict";n.r(e);var o={client:null},a={SET_CLIENT:function(t,e){t.client=e}},i={};e["default"]={namespaced:!0,state:o,mutations:a,actions:i}},"45cb":function(t,e,n){"use strict";n.r(e);var o={moduleList:[],moduleListUser:[],moduleRecord:[],openModuleBar:!1,moduleClickIndexStatus:"",currentModule:null,currentPageName:null,clickRecord:[]},a={SET_CLICK_RECORD:function(t,e){t.clickRecord=e},SET_MODULE_RECORD:function(t,e){t.moduleRecord=e},SET_CURRENT_MODULE:function(t,e){t.currentModule=e},SET_OPEN_MODULE_BAR:function(t,e){t.openModuleBar=e},SET_MODULE_LIST:function(t,e){console.log(t,e),t.moduleList=e},SET_MODULE_LIST_USER:function(t,e){t.moduleListUser=e}},i={};e["default"]={namespaced:!0,state:o,mutations:a,actions:i}},5:function(t,e){},"54cd":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Header"),n("div",{},[n("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[n("keep-alive",{attrs:{include:!t.$route.meta.cache}},[n("router-view")],1)],1)],1)],1)},i=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Nav"),n("TopProgress")],1)},c=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition",{attrs:{name:"fade-bar"}},[t.openTopBar?n("div",{staticClass:"mc-nav"},[n("div",{staticClass:"mc-container"},[n("div",{staticClass:"mc-nav-flex"},[n("div",{staticClass:"mc-nav-left"},[n("div",{staticClass:"line1"},[t._v(" 考试ID："+t._s(t.conId)+", 考试Type："+t._s(t.conType)+", 学号: "+t._s(t.sid)+", 工位号: "+t._s(t.sta)+" ")]),n("div",{staticClass:"line2"},[t._v(" 汽车检测与维修大赛 ")])]),n("div",{staticClass:"mc-nav-right"},[n("div",{staticClass:"mc-nav-menu"},[n("div",{staticClass:"mc-nav-menu-item",class:"Index"===t.$route.name?"active":""},[n("router-link",{attrs:{to:"/"}},[t._v(" 首页 ")])],1),n("div",{staticClass:"mc-nav-menu-item",class:"Login"===t.$route.name?"active":""},[n("router-link",{attrs:{to:"/login"}},[t._v(" 登录页面 ")])],1),n("div",{staticClass:"mc-nav-menu-item",class:"Sequence"===t.$route.name?"active":""},[n("router-link",{attrs:{to:"/sequence"}},[t._v(" 操作顺序 ")])],1),n("div",{staticClass:"mc-nav-menu-item",class:"Choice"===t.$route.name?"active":""},[n("router-link",{attrs:{to:"/choice"}},[t._v(" 理论考核题 ")])],1),n("div",{staticClass:"mc-nav-menu-item",class:"Table"===t.$route.name?"active":""},[n("router-link",{attrs:{to:"/table"}},[t._v(" 表格实操题 ")])],1),n("div",{staticClass:"mc-nav-menu-item",class:"MakeTable"===t.$route.name?"active":""},[n("router-link",{attrs:{to:"/makeTable"}},[t._v(" 生成表格 ")])],1),n("div",{staticClass:"mc-nav-menu-item",class:"Point"===t.$route.name?"active":""},[n("router-link",{attrs:{to:"/point"}},[t._v(" 点位图 ")])],1),n("div",{staticClass:"mc-nav-menu-item",class:"PointList"===t.$route.name?"active":""},[n("router-link",{attrs:{to:"/pointList"}},[t._v(" 点位表 ")])],1),n("div",{staticClass:"mc-nav-menu-item",class:"Mqtt"===t.$route.name?"active":""},[n("router-link",{attrs:{to:"/mqtt"}},[t._v(" MQTT ")])],1)])])])])]):t._e()])],1)},u=[],l=n("5530"),d=n("2f62"),m={name:"Nav",data:function(){return{xxvtc_url:"https://xxvtc.edu.cn"}},computed:Object(l["a"])({},Object(d["b"])(["isLogin","sid","tid","sta","conId","conType","openTopBar"])),methods:{toXxvtc:function(){window.open(this.xxvtc_url)},toHome:function(){this.$router.push("/")}}},f=m,p=n("2877"),v=Object(p["a"])(f,r,u,!1,null,"1b036c6d",null),g=v.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition",{attrs:{name:"fade-bar"}},[t.openModuleBar?n("div",{staticClass:"topProgress",class:{hasTopBar:t.openTopBar}},[n("div",{staticClass:"topProgressBg"}),n("transition-group",{staticClass:"topProgressModules",attrs:{name:"list-complete"}},[n("div",{key:"loading",staticClass:"topProgressModule",on:{click:t.updateB}},[n("div",{staticClass:"moduleItems"},[n("div",{staticClass:"moduleItem "}),n("div",{staticClass:"moduleItem "})]),n("div",{staticClass:"moduleInfo",staticStyle:{"font-weight":"700",color:"#409EFF"}},[n("span",[t._v("进度概览")]),n("div",{staticStyle:{position:"absolute",right:"16px"}},[n("transition",{attrs:{name:"fade"}},[t.tabLoading?n("span",[n("i",{staticClass:"el-icon-loading"})]):t._e()])],1)])]),t._l(t.orderModuleList,(function(e){return n("div",{key:"id-"+e.id,staticClass:"topProgressModule",class:null!==t.currentModule&&e.id===t.currentModule.id?"active":""},[n("div",{staticClass:"moduleItems"},[n("div",{staticClass:"moduleItem ",class:{active:t.check(e.id,"choice")}}),n("div",{staticClass:"moduleItem ",class:{active:t.check(e.id,"table")}})]),n("div",{staticClass:"moduleInfo"},[n("span",[t._v(t._s(e.name))])])])}))],2)],1):t._e()])],1)},T=[],_=n("b85c"),S=(n("caad"),n("2532"),n("b0c0"),n("d3b7"),n("13d5"),n("ddb0"),n("ac1f"),n("5319"),{isLogin:function(t){return t.ExamStatus.isLogin},sid:function(t){return t.ExamStatus.sid},tid:function(t){return t.ExamStatus.tid},sta:function(t){return t.ExamStatus.sta},conId:function(t){return t.ExamStatus.conId},conType:function(t){return t.ExamStatus.conType},conInfo:function(t){return t.ExamStatus.conInfo},tabLoading:function(t){return t.ExamStatus.tabLoading},openTopBar:function(t){return t.ExamStatus.openTopBar},openRightBar:function(t){return t.ExamStatus.openRightBar},openTimeBar:function(t){return t.ExamStatus.openTimeBar},moduleList:function(t){return t.ModuleStatus.moduleList},moduleListUser:function(t){return t.ModuleStatus.moduleListUser},moduleRecord:function(t){return t.ModuleStatus.moduleRecord},openModuleBar:function(t){return t.ModuleStatus.openModuleBar},moduleClickIndexStatus:function(t){return t.ModuleStatus.moduleClickIndexStatus},currentModule:function(t){return t.ModuleStatus.currentModule},clickRecord:function(t){return t.ModuleStatus.clickRecord},mqttClient:function(t){return t.Mqtt.client}}),b=S;o["default"].use(d["a"]);var E=n("c653"),C=E.keys().reduce((function(t,e){var n=e.replace(/^\.\/(.*)\.\w+$/,"$1"),o=E(e);return t[n]=o.default,t}),{}),I=new d["a"].Store({modules:C,getters:b}),M=I,L=(n("3ca3"),n("8c4f")),O=n("323e"),w=n.n(O),x=(n("a5d8"),n("99af"),n("83d6")),B=n.n(x),k=B.a.title||"Webpack App";function y(t){return t?"".concat(t," - ").concat(k):"".concat(k)}o["default"].use(L["a"]);var R=[{path:"/",name:"DataList",component:function(){return n.e("chunk-4cd9d5b2").then(n.bind(null,"de6f"))},meta:{title:"数据流",cache:!1}}],N=new L["a"]({routes:R});w.a.configure({easing:"ease",speed:1e3,showSpinner:!0,trickleSpeed:200,minimum:.3}),N.beforeEach((function(t,e,n){document.title=y(t.meta.title);var o=setInterval((function(){document.body.scrollTop--,document.documentElement.scrollTop--,console.log(document.body.scrollTop),console.log(document.documentElement.scrollTop),(document.body.scrollTop<=0||document.documentElement.scrollTop<=0)&&clearInterval(o)}),1);w.a.start(),n()})),N.afterEach((function(){w.a.done()}));var q=N,P=n("bc3a"),D=n.n(P),$=n("4328"),j=n.n($),U=n("5c96"),A=n.n(U),F=D.a.create({baseURL:"/api",timeout:1e4});F.interceptors.request.use((function(t){return t.data=j.a.stringify(t.data),t}),(function(t){return Promise.reject(t)})),F.interceptors.response.use((function(t){var e=t.data;return console.log(e),e}),(function(t){return U["Message"].error("发送请求失败，请检查网络或稍后重试！"),console.log("request error: ",t),Promise.reject(t)}));var G=F;function J(t){return G({url:"/checkAllModels/",method:"get",params:t})}function H(){return new Promise((function(t,e){M.commit("ExamStatus/SET_TAB_LOADING",!0),J({con_id:M.getters.conId,sid:M.getters.sid}).then((function(e){M.commit("ModuleStatus/SET_MODULE_RECORD",e),M.commit("ExamStatus/SET_TAB_LOADING",!1);var n=M.getters.moduleListUser,o=M.getters.moduleRecord;console.log("moduleList",n),console.log("moduleRecord",o);var a,i=null,s=Object(_["a"])(n);try{for(s.s();!(a=s.n()).done;){var c,r=a.value,u=Object(_["a"])(o);try{for(u.s();!(c=u.n()).done;){var l=c.value;if(r.id===l.id){if(!0===l.choice&&!0===l.table)continue;null===i&&(i=!0===l.choice&&!1===l.table?{moduleInfo:r,type:"table",pageName:"Table"}:(!1===l.choice&&l.table,{moduleInfo:r,type:"choice",pageName:"Choice"}))}}}catch(d){u.e(d)}finally{u.f()}}}catch(d){s.e(d)}finally{s.f()}t(i)})).catch((function(){M.commit("ExamStatus/SET_TAB_LOADING",!1)}))}))}var K,Q={name:"TopProgress",data:function(){return{message:"",modules:[],showBarPages:["Sequence","Table","Choice"]}},computed:Object(l["a"])(Object(l["a"])({},Object(d["b"])(["conId","sid","moduleList","moduleListUser","moduleRecord","currentModule","tabLoading","openTopBar"])),{},{openModuleBar:function(){return!!this.showBarPages.includes(this.$route.name)},orderModuleList:function(){if("Sequence"===this.$route.name){var t=JSON.parse(JSON.stringify(this.moduleList));return this.$sortByKey(t,"clickIndex")}return this.moduleListUser}}),mounted:function(){},methods:{updateB:function(){H()},check:function(t,e){var n,o=Object(_["a"])(this.moduleRecord);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.id===t)return a[e]}}catch(i){o.e(i)}finally{o.f()}},updateA:function(){},test:function(){}}},V=Q,W=(n("73a1"),Object(p["a"])(V,h,T,!1,null,"28835a6a",null)),X=W.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition",{attrs:{name:"fade-right-bar"}},[t.openTimeBar&&t.timeInit?n("div",{staticClass:"right-bar-item primary",staticStyle:{top:"80px"}},[n("div",{staticClass:"value"},[n("el-icon",{staticStyle:{"margin-right":"8px"},attrs:{name:"time"}}),t._v(" "+t._s(t.timeText)+" ")],1)]):t._e()]),n("transition",{attrs:{name:"fade-right-bar"}},[t.openRightBar?n("div",{staticClass:"right-bar-item warning",staticStyle:{top:"130px"},on:{click:t.toModulePage}},[n("div",{staticClass:"name"},[t._v(" 重新调整模块顺序 ")])]):t._e()])],1)},z=[],Z=(n("25f0"),n("e7fc")),tt=n.n(Z),et=n("ead3"),nt={connectTimeout:4e4,username:et["c"],password:et["a"],clean:!0},ot={name:"RightBar",data:function(){return{message:"",push:{message:""},pull:{message:""},isStop:!1,timeInit:!1,timeText:null,stopCount:0}},computed:Object(l["a"])({},Object(d["b"])(["tid","sid","conInfo","openTimeBar","openRightBar"])),mounted:function(){var t=this;K=tt.a.connect(et["b"],nt),setTimeout((function(){t.mqttMSG()}),100),setInterval((function(){t.isStop||t.updateTime()}),1e3)},methods:{updateTime:function(){this.timeText=this.secondToTimeStr(Date.parse(this.conInfo&&this.conInfo.end_date)/1e3-Date.parse(new Date)/1e3+this.stopCount),this.timeInit=!0},secondToTimeStr:function(t){if(t){if(t<60)return"00:"+((n=t)<10?"0"+n:n);if(t<3600)return((e=parseInt(t/60))<10?"0"+e:e)+":"+((n=t%60)<10?"0"+n:n);if(t>=3600){var e,n,o=parseInt(t/3600);return(o<10?"0"+o:o)+":"+((e=parseInt(t%3600/60))<10?"0"+e:e)+":"+((n=t%60)<10?"0"+n:n)}}},sendMessage:function(){this.publish("vue",JSON.stringify({card:this.dataPackage.card,address:this.dataPackage.address,status:this.dataPackage.status}))},mqttMSG:function(){var t=this;K.on("connect",(function(){console.log("连接成功:"),K.subscribe("tid:190110",{qos:1},(function(e){e?console.log("订阅失败"):(t.pubMess(),console.log("订阅成功"))}))})),K.on("message",(function(e,n){console.log("收到来自",e,"的消息",n.toString()),t.pull.message=n.toString();var o=JSON.parse(n.toString());"stop"===o.mess?t.isStop=!0:"start"===o.mess&&(t.isStop=!1,t.stopCount=o.time)})),K.on("reconnect",(function(t){console.log("正在重连:",t)})),K.on("error",(function(t){console.log("连接失败:",t)}))},pubMess:function(){console.log("我是vue"),this.publish("sid:20197578","我是vue")},publish:function(t,e){console.log(K.connected),K.connected?K.publish(t,e,{qos:1},(function(e){e||console.log("主题为"+t+"发布成功")})):console.log("客户端未连接")},toModulePage:function(){this.$router.push({name:"Sequence"})}}},at=ot,it=(n("f876"),Object(p["a"])(at,Y,z,!1,null,"af05147c",null)),st=it.exports,ct={name:"Header",components:{RightBar:st,TopProgress:X,Nav:g}},rt=ct,ut=Object(p["a"])(rt,s,c,!1,null,"ff55d1ec",null),lt=ut.exports,dt=(n("e26d"),{name:"App",components:{Header:lt},mounted:function(){}}),mt=dt,ft=(n("034f"),Object(p["a"])(mt,a,i,!1,null,null,null)),pt=ft.exports,vt=(n("0fae"),n("4ae6")),gt=n.n(vt);n("139c");o["default"].use(A.a),o["default"].use(gt.a),o["default"].config.productionTip=!1,o["default"].prototype.$copyObject=function(t){return JSON.parse(JSON.stringify(t))},o["default"].prototype.$sortByKey=function(t,e,n){for(var o=0;o<t.length;o++)for(var a=o+1;a<t.length;a++)if("desc"===n){if(parseFloat(t[o][e])<=parseFloat(t[a][e])){var i=t[o];t[o]=t[a],t[a]=i}}else if(parseFloat(t[o][e])>=parseFloat(t[a][e])){var s=t[o];t[o]=t[a],t[a]=s}return t},new o["default"]({router:q,store:M,render:function(t){return t(pt)}}).$mount("#app")},6:function(t,e){},7:function(t,e){},"70e4":function(t,e,n){},"73a1":function(t,e,n){"use strict";n("54cd")},"83d6":function(t,e){t.exports={title:"测试程序",showSettings:!1,tagsView:!0,fixedHeader:!0,sidebarLogo:!0,errorLog:"production"}},"85ec":function(t,e,n){},c653:function(t,e,n){var o={"./ExamStatus.js":"d4dc","./ModuleStatus.js":"45cb","./Mqtt.js":"452c"};function a(t){var e=i(t);return n(e)}function i(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}a.keys=function(){return Object.keys(o)},a.resolve=i,t.exports=a,a.id="c653"},d4dc:function(t,e,n){"use strict";n.r(e);var o={isLogin:!1,sid:null,tid:null,sta:null,conInfo:null,conId:"1",conType:null,tabLoading:!1,openTopBar:!1,openRightBar:!1,openTimeBar:!1},a={SET_OPEN_TIME_BAR:function(t,e){t.openTimeBar=e},SET_OPEN_RIGHT_BAR:function(t,e){t.openRightBar=e},SET_OPEN_TOP_BAR:function(t,e){t.openTopBar=e},SET_TAB_LOADING:function(t,e){t.tabLoading=e},SET_IS_LOGIN:function(t,e){t.isLogin=e},SET_SID:function(t,e){t.sid=e},SET_TID:function(t,e){t.tid=e},SET_STA:function(t,e){t.sta=e},SET_CON_INFO:function(t,e){t.conInfo=e},SET_CON_ID:function(t,e){t.conId=e},SET_CON_TYPE:function(t,e){t.conType=e}},i={};e["default"]={namespaced:!0,state:o,mutations:a,actions:i}},e26d:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("d3b7"),n("25f0");var o=n("e7fc"),a=n.n(o),i=n("ead3"),s=n("5c96"),c=null;function r(t){c=t,window.mqttClient=a.a.connect(i["b"],{connectTimeout:4e4,username:i["c"],password:i["a"],clean:!0}),window.mqttClient.on("connect",(function(){s["Message"].success("连接成功"),console.log("连接成功:"),window.mqttClient.subscribe("carNo/"+c+"/CarData",{qos:2},(function(t){t?console.log("订阅失败"):console.log("订阅成功")})),window.mqttClient.subscribe("carNo/"+c+"/ErrorData",{qos:2},(function(t){t?console.log("订阅失败"):console.log("订阅成功")}))})),window.mqttClient.on("message",(function(t,e){window.onMqttMessage(t,e.toString())})),window.mqttClient.on("reconnect",(function(t){console.log("正在重连:",t)})),window.mqttClient.on("error",(function(t){console.log("连接失败:",t)}))}window.initmqtt=r},ead3:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var o="ws://mqtt.car.com:8083/mqtt",a="admin",i="admin123"},f876:function(t,e,n){"use strict";n("70e4")}},[[0,"runtime","chunk-elementUI","chunk-libs"]]]);