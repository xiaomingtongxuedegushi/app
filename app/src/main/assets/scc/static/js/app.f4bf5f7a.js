(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},1:function(t,e){},"139c":function(t,e,n){},"1a51":function(t,e,n){},2:function(t,e){},3:function(t,e){},3730:function(t,e,n){},4:function(t,e){},4360:function(t,e,n){"use strict";n("13d5"),n("d3b7"),n("ddb0"),n("ac1f"),n("5319");var o=n("2b0e"),a=n("2f62"),i={isLogin:function(t){return t.ExamStatus.isLogin},sid:function(t){return t.ExamStatus.sid},tid:function(t){return t.ExamStatus.tid},sta:function(t){return t.ExamStatus.sta},conId:function(t){return t.ExamStatus.conId},conType:function(t){return t.ExamStatus.conType},conInfo:function(t){return t.ExamStatus.conInfo},tabLoading:function(t){return t.ExamStatus.tabLoading},openTopBar:function(t){return t.ExamStatus.openTopBar},openRightBar:function(t){return t.ExamStatus.openRightBar},openTimeBar:function(t){return t.ExamStatus.openTimeBar},moduleList:function(t){return t.ModuleStatus.moduleList},moduleListUser:function(t){return t.ModuleStatus.moduleListUser},moduleRecord:function(t){return t.ModuleStatus.moduleRecord},openModuleBar:function(t){return t.ModuleStatus.openModuleBar},moduleClickIndexStatus:function(t){return t.ModuleStatus.moduleClickIndexStatus},currentModule:function(t){return t.ModuleStatus.currentModule},clickRecord:function(t){return t.ModuleStatus.clickRecord}},s=i;o["default"].use(a["a"]);var c=n("c653"),r=c.keys().reduce((function(t,e){var n=e.replace(/^\.\/(.*)\.\w+$/,"$1"),o=c(e);return t[n]=o.default,t}),{}),u=new a["a"].Store({modules:r,getters:s});e["a"]=u},"45cb":function(t,e,n){"use strict";n.r(e);var o={moduleList:[],moduleListUser:[],moduleRecord:[],openModuleBar:!1,moduleClickIndexStatus:"",currentModule:null,currentPageName:null,clickRecord:[]},a={SET_CLICK_RECORD:function(t,e){t.clickRecord=e},SET_MODULE_RECORD:function(t,e){t.moduleRecord=e},SET_CURRENT_MODULE:function(t,e){t.currentModule=e},SET_OPEN_MODULE_BAR:function(t,e){t.openModuleBar=e},SET_MODULE_LIST:function(t,e){console.log(t,e),t.moduleList=e},SET_MODULE_LIST_USER:function(t,e){t.moduleListUser=e}},i={};e["default"]={namespaced:!0,state:o,mutations:a,actions:i}},5:function(t,e){},"54cd":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Header"),n("div",{staticClass:"mc-body mc-body-with-nav"},[n("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[n("router-view")],1)],1)],1)},i=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Nav"),n("TopTab"),n("TopProgress"),n("RightBar")],1)},c=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition",{attrs:{name:"fade-bar"}},[t.openTopBar?n("div",{staticClass:"mc-nav"},[n("div",{staticClass:"mc-container"},[n("div",{staticClass:"mc-nav-flex"},[n("div",{staticClass:"mc-nav-left"},[n("div",{staticClass:"line1"},[t._v(" 考试ID："+t._s(t.conId)+", 考试Type："+t._s(t.conType)+", 学号: "+t._s(t.sid)+", 工位号: "+t._s(t.sta)+" ")]),n("div",{staticClass:"line2"},[t._v(" 汽车检测与维修大赛 ")])]),n("div",{staticClass:"mc-nav-right"},[n("div",{staticClass:"mc-nav-menu"},[n("div",{staticClass:"mc-nav-menu-item",class:"Index"===t.$route.name?"active":""},[n("router-link",{attrs:{to:"/"}},[t._v(" 首页 ")])],1),n("div",{staticClass:"mc-nav-menu-item",class:"Login"===t.$route.name?"active":""},[n("router-link",{attrs:{to:"/login"}},[t._v(" 登录页面 ")])],1),n("div",{staticClass:"mc-nav-menu-item",class:"Sequence"===t.$route.name?"active":""},[n("router-link",{attrs:{to:"/sequence"}},[t._v(" 操作顺序 ")])],1),n("div",{staticClass:"mc-nav-menu-item",class:"Choice"===t.$route.name?"active":""},[n("router-link",{attrs:{to:"/choice"}},[t._v(" 理论考核题 ")])],1),n("div",{staticClass:"mc-nav-menu-item",class:"Table"===t.$route.name?"active":""},[n("router-link",{attrs:{to:"/table"}},[t._v(" 表格实操题 ")])],1),n("div",{staticClass:"mc-nav-menu-item",class:"MakeTable"===t.$route.name?"active":""},[n("router-link",{attrs:{to:"/makeTable"}},[t._v(" 生成表格 ")])],1),n("div",{staticClass:"mc-nav-menu-item",class:"Point"===t.$route.name?"active":""},[n("router-link",{attrs:{to:"/point"}},[t._v(" 点位 ")])],1),n("div",{staticClass:"mc-nav-menu-item",class:"Mqtt"===t.$route.name?"active":""},[n("router-link",{attrs:{to:"/mqtt"}},[t._v(" MQTT ")])],1)])])])])]):t._e()])],1)},u=[],l=n("5530"),d=n("2f62"),m={name:"Nav",data:function(){return{xxvtc_url:"https://xxvtc.edu.cn"}},computed:Object(l["a"])({},Object(d["b"])(["isLogin","sid","tid","sta","conId","conType","openTopBar"])),methods:{toXxvtc:function(){window.open(this.xxvtc_url)},toHome:function(){this.$router.push("/")}}},f=m,p=n("2877"),v=Object(p["a"])(f,r,u,!1,null,"ace25728",null),g=v.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition",{attrs:{name:"fade-bar"}},[t.openModuleBar?n("div",{staticClass:"topProgress",class:{hasTopBar:t.openTopBar}},[n("div",{staticClass:"topProgressBg"}),n("transition-group",{staticClass:"topProgressModules",attrs:{name:"list-complete"}},[n("div",{key:"loading",staticClass:"topProgressModule",on:{click:t.updateB}},[n("div",{staticClass:"moduleItems"},[n("div",{staticClass:"moduleItem "}),n("div",{staticClass:"moduleItem "})]),n("div",{staticClass:"moduleInfo",staticStyle:{"font-weight":"700",color:"#409EFF"}},[n("span",[t._v("进度概览")]),n("div",{staticStyle:{position:"absolute",right:"16px"}},[n("transition",{attrs:{name:"fade"}},[t.tabLoading?n("span",[n("i",{staticClass:"el-icon-loading"})]):t._e()])],1)])]),t._l(t.orderModuleList,(function(e){return n("div",{key:"id-"+e.id,staticClass:"topProgressModule",class:null!==t.currentModule&&e.id===t.currentModule.id?"active":""},[n("div",{staticClass:"moduleItems"},[n("div",{staticClass:"moduleItem ",class:{active:t.check(e.id,"choice")}}),n("div",{staticClass:"moduleItem ",class:{active:t.check(e.id,"table")}})]),n("div",{staticClass:"moduleInfo"},[n("span",[t._v(t._s(e.name))])])])}))],2)],1):t._e()])],1)},_=[],b=n("b85c"),S=(n("caad"),n("2532"),n("b0c0"),n("d3b7"),n("4360")),T=(n("3ca3"),n("ddb0"),n("8c4f")),I=n("323e"),C=n.n(I),E=(n("a5d8"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"mc-container"},[n("div",{staticClass:"exam-info"},[n("div",{staticClass:"exam-name"},[t.conInfo&&0===t.conInfo.type?n("span",[t._v("[实训]")]):t._e(),t._v(t._s(t.conInfo&&t.conInfo.name)+" ")]),n("div",{staticClass:"exam-description"},[t._v(" 开始时间："+t._s(t.conInfo&&t.conInfo.start_date)+" | 结束时间："+t._s(t.conInfo&&t.conInfo.end_date)+" ")])]),n("transition",{attrs:{name:"fade-bar",mode:"out-in"}},[!t.init||t.isEnd||t.isWait?t._e():n("div",{key:"ok",staticStyle:{"text-align":"center"}},[n("el-button",{attrs:{type:"primary"},on:{click:t.toLoginPage}},[t._v("进入登录页面")])],1),t.isEnd?n("div",{key:"end",staticClass:"wait-box"},[n("div",{staticClass:"text-end"},[t._v(" END ")]),n("div",{staticClass:"wait-text"},[t._v(" 考试已结束 ")])]):t._e(),t.isWait?n("div",{key:"wait",staticClass:"wait-box"},[n("div",{staticClass:"wait-timer"},[n("div",{staticClass:"wait-timer-circle"}),n("div",{staticClass:"wait-timer-pointer"})]),n("div",{staticClass:"wait-text"},[t._v(" 考试暂未开放，请耐心等待 ")])]):t._e()])],1)])}),w=[],x={name:"Index",data:function(){return{init:!1,isWait:!1,isEnd:!1,noFade:!1,angleActive:0,angleList:[0,90,180,270,360]}},computed:Object(l["a"])({},Object(d["b"])(["conInfo"])),mounted:function(){var t=this;setInterval((function(){t.updateStatus()}),1e3)},methods:{toLoginPage:function(t){this.$router.push({name:"Login"})},updateStatus:function(){Date.parse(this.conInfo.start_date)>Date.parse(new Date)?this.isWait=!0:this.isWait=!1,Date.parse(this.conInfo.end_date)<Date.parse(new Date)?this.isEnd=!0:this.isEnd=!1,this.init=!0}}},M=x,O=(n("935e"),Object(p["a"])(M,E,w,!1,null,"def4a2c8",null)),k=(O.exports,n("99af"),n("83d6")),L=n.n(k),y=L.a.title||"Webpack App";function B(t){return t?"".concat(t," - ").concat(y):"".concat(y)}o["default"].use(T["a"]);var R=[{path:"/",name:"Point",component:function(){return Promise.all([n.e("chunk-elementUI"),n.e("chunk-3de53d94"),n.e("chunk-58d5f909")]).then(n.bind(null,"ec59"))},meta:{title:"点位"}},{path:"/makePoint",name:"MakePoint",component:function(){return Promise.all([n.e("chunk-elementUI"),n.e("chunk-3de53d94"),n.e("chunk-56d90ef9")]).then(n.bind(null,"a803"))},meta:{title:"制作点位图"}}],q=new T["a"]({routes:R});C.a.configure({easing:"ease",speed:500,showSpinner:!0,trickleSpeed:200,minimum:.3}),q.beforeEach((function(t,e,n){document.title=B(t.meta.title);var o=setInterval((function(){document.body.scrollTop--,document.documentElement.scrollTop--,console.log(document.body.scrollTop),console.log(document.documentElement.scrollTop),(document.body.scrollTop<=0||document.documentElement.scrollTop<=0)&&clearInterval(o)}),1);C.a.start(),n()})),q.afterEach((function(){C.a.done()}));var P=q,N=n("bc3a"),D=n.n(N),$=n("4328"),j=n.n($),U=n("5c96"),A=n.n(U),F=D.a.create({baseURL:"/api",timeout:1e4});F.interceptors.request.use((function(t){return t.data=j.a.stringify(t.data),t}),(function(t){return Promise.reject(t)})),F.interceptors.response.use((function(t){var e=t.data;return console.log(e),e}),(function(t){return U["Message"].error("发送请求失败，请检查网络或稍后重试！"),console.log("request error: ",t),Promise.reject(t)}));var G=F;function J(t){return G({url:"/checkAllModels/",method:"get",params:t})}function H(){return new Promise((function(t,e){S["a"].commit("ExamStatus/SET_TAB_LOADING",!0),J({con_id:S["a"].getters.conId,sid:S["a"].getters.sid}).then((function(e){S["a"].commit("ModuleStatus/SET_MODULE_RECORD",e),S["a"].commit("ExamStatus/SET_TAB_LOADING",!1);var n=S["a"].getters.moduleListUser,o=S["a"].getters.moduleRecord;console.log("moduleList",n),console.log("moduleRecord",o);var a,i=null,s=Object(b["a"])(n);try{for(s.s();!(a=s.n()).done;){var c,r=a.value,u=Object(b["a"])(o);try{for(u.s();!(c=u.n()).done;){var l=c.value;if(r.id===l.id){if(!0===l.choice&&!0===l.table)continue;null===i&&(i=!0===l.choice&&!1===l.table?{moduleInfo:r,type:"table",pageName:"Table"}:(!1===l.choice&&l.table,{moduleInfo:r,type:"choice",pageName:"Choice"}))}}}catch(d){u.e(d)}finally{u.f()}}}catch(d){s.e(d)}finally{s.f()}t(i)})).catch((function(){S["a"].commit("ExamStatus/SET_TAB_LOADING",!1)}))}))}var W,K={name:"TopProgress",data:function(){return{message:"",modules:[],showBarPages:["Sequence","Table","Choice"]}},computed:Object(l["a"])(Object(l["a"])({},Object(d["b"])(["conId","sid","moduleList","moduleListUser","moduleRecord","currentModule","tabLoading","openTopBar"])),{},{openModuleBar:function(){return!!this.showBarPages.includes(this.$route.name)},orderModuleList:function(){if("Sequence"===this.$route.name){var t=JSON.parse(JSON.stringify(this.moduleList));return this.$sortByKey(t,"clickIndex")}return this.moduleListUser}}),mounted:function(){},methods:{updateB:function(){H()},check:function(t,e){var n,o=Object(b["a"])(this.moduleRecord);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.id===t)return a[e]}}catch(i){o.e(i)}finally{o.f()}},updateA:function(){},test:function(){}}},V=K,Q=(n("73a1"),Object(p["a"])(V,h,_,!1,null,"28835a6a",null)),X=Q.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition",{attrs:{name:"fade-right-bar"}},[t.openTimeBar&&t.timeInit?n("div",{staticClass:"right-bar-item primary",staticStyle:{top:"80px"}},[n("div",{staticClass:"value"},[n("el-icon",{staticStyle:{"margin-right":"8px"},attrs:{name:"time"}}),t._v(" "+t._s(t.timeText)+" ")],1)]):t._e()]),n("transition",{attrs:{name:"fade-right-bar"}},[t.openRightBar?n("div",{staticClass:"right-bar-item warning",staticStyle:{top:"130px"},on:{click:t.toModulePage}},[n("div",{staticClass:"name"},[t._v(" 重新调整模块顺序 ")])]):t._e()])],1)},z=[],Z=(n("25f0"),n("e7fc")),tt=n.n(Z),et=n("ead3"),nt={connectTimeout:4e4,username:et["c"],password:et["a"],clean:!0},ot={name:"RightBar",data:function(){return{message:"",push:{message:""},pull:{message:""},isStop:!1,timeInit:!1,timeText:null,stopCount:0}},computed:Object(l["a"])({},Object(d["b"])(["tid","sid","conInfo","openTimeBar","openRightBar"])),mounted:function(){var t=this;W=tt.a.connect(et["b"],nt),setTimeout((function(){t.mqttMSG()}),100),setInterval((function(){t.isStop||t.updateTime()}),1e3)},methods:{updateTime:function(){this.conInfo&&(this.timeText=this.secondToTimeStr(Date.parse(this.conInfo.end_date)/1e3-Date.parse(new Date)/1e3+this.stopCount),this.timeInit=!0)},secondToTimeStr:function(t){if(t){if(t<60)return"00:"+((n=t)<10?"0"+n:n);if(t<3600)return((e=parseInt(t/60))<10?"0"+e:e)+":"+((n=t%60)<10?"0"+n:n);if(t>=3600){var e,n,o=parseInt(t/3600);return(o<10?"0"+o:o)+":"+((e=parseInt(t%3600/60))<10?"0"+e:e)+":"+((n=t%60)<10?"0"+n:n)}}},sendMessage:function(){this.publish("vue",JSON.stringify({card:this.dataPackage.card,address:this.dataPackage.address,status:this.dataPackage.status}))},mqttMSG:function(){var t=this;W.on("connect",(function(){console.log("连接成功:"),W.subscribe("tid:190110",{qos:1},(function(e){e?console.log("订阅失败"):(t.pubMess(),console.log("订阅成功"))}))})),W.on("message",(function(e,n){console.log("收到来自",e,"的消息",n.toString()),t.pull.message=n.toString();var o=JSON.parse(n.toString());"stop"===o.mess?t.isStop=!0:"start"===o.mess&&(t.isStop=!1,t.stopCount=o.time)})),W.on("reconnect",(function(t){console.log("正在重连:",t)})),W.on("error",(function(t){console.log("连接失败:",t)}))},pubMess:function(){console.log("我是vue"),this.publish("sid:20197578","我是vue")},publish:function(t,e){console.log(W.connected),W.connected?W.publish(t,e,{qos:1},(function(e){e||console.log("主题为"+t+"发布成功")})):console.log("客户端未连接")},toModulePage:function(){this.$router.push({name:"Sequence"})}}},at=ot,it=(n("b178"),Object(p["a"])(at,Y,z,!1,null,"286871c2",null)),st=it.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},rt=[],ut={name:"TopTab",data:function(){return{message:""}},mounted:function(){},methods:{}},lt=ut,dt=Object(p["a"])(lt,ct,rt,!1,null,"4eb6dd23",null),mt=dt.exports,ft={name:"Header",components:{TopTab:mt,RightBar:st,TopProgress:X,Nav:g}},pt=ft,vt=Object(p["a"])(pt,s,c,!1,null,"71f04bd8",null),gt=vt.exports,ht={name:"App",components:{Header:gt},mounted:function(){}},_t=ht,bt=(n("034f"),Object(p["a"])(_t,a,i,!1,null,null,null)),St=bt.exports,Tt=(n("0fae"),n("139c"),n("e26d"));o["default"].use(A.a),window.initmqtt=Tt["b"],o["default"].config.productionTip=!1,o["default"].prototype.$copyObject=function(t){return JSON.parse(JSON.stringify(t))},o["default"].prototype.$sortByKey=function(t,e,n){for(var o=0;o<t.length;o++)for(var a=o+1;a<t.length;a++)if("desc"===n){if(parseFloat(t[o][e])<=parseFloat(t[a][e])){var i=t[o];t[o]=t[a],t[a]=i}}else if(parseFloat(t[o][e])>=parseFloat(t[a][e])){var s=t[o];t[o]=t[a],t[a]=s}return t},new o["default"]({router:P,store:S["a"],render:function(t){return t(St)}}).$mount("#app")},6:function(t,e){},7:function(t,e){},"73a1":function(t,e,n){"use strict";n("54cd")},"83d6":function(t,e){t.exports={title:"测试程序",showSettings:!1,tagsView:!0,fixedHeader:!0,sidebarLogo:!0,errorLog:"production"}},"85ec":function(t,e,n){},"935e":function(t,e,n){"use strict";n("3730")},b178:function(t,e,n){"use strict";n("1a51")},c653:function(t,e,n){var o={"./ExamStatus.js":"d4dc","./ModuleStatus.js":"45cb"};function a(t){var e=i(t);return n(e)}function i(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}a.keys=function(){return Object.keys(o)},a.resolve=i,t.exports=a,a.id="c653"},d4dc:function(t,e,n){"use strict";n.r(e);var o={isLogin:!1,sid:null,tid:null,sta:null,conInfo:null,conId:"1",conType:null,tabLoading:!1,openTopBar:!1,openRightBar:!1,openTimeBar:!1},a={SET_OPEN_TIME_BAR:function(t,e){t.openTimeBar=e},SET_OPEN_RIGHT_BAR:function(t,e){t.openRightBar=e},SET_OPEN_TOP_BAR:function(t,e){t.openTopBar=e},SET_TAB_LOADING:function(t,e){t.tabLoading=e},SET_IS_LOGIN:function(t,e){t.isLogin=e},SET_SID:function(t,e){t.sid=e},SET_TID:function(t,e){t.tid=e},SET_STA:function(t,e){t.sta=e},SET_CON_INFO:function(t,e){t.conInfo=e},SET_CON_ID:function(t,e){t.conId=e},SET_CON_TYPE:function(t,e){t.conType=e}},i={};e["default"]={namespaced:!0,state:o,mutations:a,actions:i}},e26d:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return l}));n("d3b7"),n("25f0"),n("4360");var o=n("e7fc"),a=n.n(o),i=n("ead3"),s=n("5c96"),c=null;function r(){return window.localStorage.getItem("computerName")}function u(t,e){var n=!1;if(null!==window.mqttClient&&void 0!==window.mqttClient||(l(),n=!0),n)var o=0,a=setInterval((function(){o++,o>=3e3&&(s["Message"].error("连接超时，请稍后重试！"),clearInterval(a)),window.mqttClient.connected&&(clearInterval(a),window.mqttClient.publish(t,e,{qos:1},(function(e){e||console.log("主题为"+t+"发布成功")})))}),1);else window.mqttClient.publish(t,e,{qos:1},(function(e){e||console.log("主题为"+t+"发布成功")}))}function l(t){console.log("开始注入计算机名");var e=window.localStorage.getItem("computerName");if(!t||""===t||null===t){if(null===e||""===e)return s["Message"].error("计算机名不能为空"),!1;t=e}c=t,window.localStorage.setItem("computerName",t),window.mqttClient=a.a.connect(i["b"],{connectTimeout:4e4,username:i["c"],password:i["a"],clean:!0}),window.mqttClient.on("connect",(function(){console.log("连接成功:"),window.mqttClient.subscribe("studentVInfo",{qos:1},(function(t){t?(s["Message"].error("订阅[studentVInfo]失败"),console.log("订阅失败")):(s["Message"].success("订阅成功！"),console.log("订阅成功"))})),window.mqttClient.subscribe("c"+c,{qos:1},(function(t){t?(s["Message"].error("订阅[c"+c+"]失败"),console.log("订阅失败")):(s["Message"].success("订阅成功！"),console.log("订阅成功"))}))})),window.mqttClient.on("message",(function(t,e){console.log("收到来自",t,"的消息",e.toString()),window.onMqttMessage(t,e.toString())})),window.mqttClient.on("reconnect",(function(t){console.log("正在重连:",t)})),window.mqttClient.on("error",(function(t){console.log("连接失败:",t)}))}},ead3:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var o="ws://mqtt.car.com:8083/mqtt",a="admin",i="admin123"}},[[0,"runtime","chunk-elementUI","chunk-libs"]]]);